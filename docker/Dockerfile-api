FROM golang:1.10 as builder

ENV CGO_ENABLED=0
RUN go get github.com/golang/dep/cmd/dep
COPY RESTAPI $GOPATH/src/github.com/watcharaphat/tendermint-benchmark/RESTAPI

WORKDIR $GOPATH/src/github.com/watcharaphat/tendermint-benchmark/RESTAPI
# RUN dep ensure && go install
RUN go get github.com/gorilla/mux
RUN go build -o main .

# FROM alpine:3.7

ENV TERM=xterm-256color
# COPY --from=builder /go/bin/abci /usr/bin/abci-server
# ENTRYPOINT [ "abci-server" ]
# CMD [ "/usr/bin/go", "run", "main.go" ]
CMD [ "./main" ]